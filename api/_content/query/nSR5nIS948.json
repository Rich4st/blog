{"_path":"/_/fast-api","_dir":"_","_draft":false,"_partial":true,"_locale":"en","_empty":false,"title":"微前端初体验——qiankun","description":"","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"微前端初体验qiankun"},"children":[{"type":"text","value":"微前端初体验——qiankun"}]},{"type":"element","tag":"h2","props":{"id":"-什么是微前端"},"children":[{"type":"text","value":"🧐 什么是微前端"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Techniques, strategies and recipes for building a "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"modern web app"}]},{"type":"text","value":" with "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"multiple teams"}]},{"type":"text","value":" that can "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"ship features independently"}]},{"type":"text","value":". -- "},{"type":"element","tag":"a","props":{"href":"https://micro-frontends.org/","rel":["nofollow"]},"children":[{"type":"text","value":"Micro Frontends"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"微前端是一种多个团队通过独立发布功能的方式来共同构建现代化 web 应用的技术手段及方法策略。"}]}]},{"type":"element","tag":"h3","props":{"id":"核心思想"},"children":[{"type":"text","value":"核心思想"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"技术栈无关"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"​\t\t 主框架不限制接入应用的技术栈，部署完成后主框架自动完成同步更新。即不论你使用的是React、Vue或是其他任何框架都可以部署到主应用上。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"独立开发、独立部署"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"​\t\t 微应用仓库独立，前后端可独立开发，部署完成后主框架自动完成同步更新。主框架只负责将子应用的功能进行组合展示，每个子应用都是一个独立的的应用，而对于主应用来说每个子应用都是一个组件。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"增量升级"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"​\t\t 在面对各种复杂场景时，我们通常很难对一个已经存在的系统做全量的技术栈升级或重构，而微前端是一种非常好的实施渐进式重构的手段和策略。因为每个子应用都是一个独立的应用，代码耦合度更小，在需要更新迭代时更清晰。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"独立运行时"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"​\t\t 每个微应用之间状态隔离，运行时状态不共享。每个子应用也可以脱离主框架独立运行。"}]},{"type":"element","tag":"h3","props":{"id":"实现方案"},"children":[{"type":"text","value":"实现方案"}]},{"type":"element","tag":"h4","props":{"id":"1-iframe"},"children":[{"type":"text","value":"1. "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/iframe","rel":["nofollow"]},"children":[{"type":"text","value":"iframe"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"​\t嵌套网页，通过window.postMessage通信。"}]},{"type":"element","tag":"h4","props":{"id":"2-single-spa"},"children":[{"type":"text","value":"2. "},{"type":"element","tag":"a","props":{"href":"https://single-spa.js.org/","rel":["nofollow"]},"children":[{"type":"text","value":"single-spa"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"官网介绍：一个"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"前端微服务"}]},{"type":"text","value":"的javascript框架"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"阿里团队的微前端框架"},{"type":"element","tag":"a","props":{"href":"https://qiankun.umijs.org/zh","rel":["nofollow"]},"children":[{"type":"text","value":"qiankun"}]},{"type":"text","value":"也是基于"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"single-spa"}]},{"type":"text","value":"实现的"}]}]},{"type":"element","tag":"h4","props":{"id":"3-qiankun"},"children":[{"type":"text","value":"3. "},{"type":"element","tag":"a","props":{"href":"https://qiankun.umijs.org/zh","rel":["nofollow"]},"children":[{"type":"text","value":"qiankun"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"官方文档："},{"type":"element","tag":"a","props":{"href":"https://qiankun.umijs.org/zh/guide","rel":["nofollow"]},"children":[{"type":"text","value":"https://qiankun.umijs.org/zh/guide"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"官方文档为中文，这里不做过多介绍，下面将使用"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"qiankun"}]},{"type":"text","value":"完成一个简单的demo"}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"-快速上手"},"children":[{"type":"text","value":"🚀 快速上手"}]},{"type":"element","tag":"h3","props":{"id":"环境"},"children":[{"type":"text","value":"环境"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Node: v16.15.1"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Npm: 8.17.0"}]}]},{"type":"element","tag":"h3","props":{"id":"选定基座项目"},"children":[{"type":"text","value":"选定基座项目"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"qiankun对基座项目没有限制，官方也有三大流行框架搭建微前端项目的教程，该文章以"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Vue"}]},{"type":"text","value":"为基座搭建项目。"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://qiankun.umijs.org/zh/guide/tutorial#react-%E5%BE%AE%E5%BA%94%E7%94%A8","rel":["nofollow"]},"children":[{"type":"text","value":"React微应用"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://qiankun.umijs.org/zh/guide/tutorial#vue-%E5%BE%AE%E5%BA%94%E7%94%A8","rel":["nofollow"]},"children":[{"type":"text","value":"Vue微应用"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://qiankun.umijs.org/zh/guide/tutorial#angular-%E5%BE%AE%E5%BA%94%E7%94%A8","rel":["nofollow"]},"children":[{"type":"text","value":"Angular微应用"}]}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"通过Npm初始化一个Vue项目"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"注意:"}]},{"type":"text","value":"  目前qiankun暂不支持接入基于Vite的子应用, 但是对于主应用没有限制,所以此处创建一个Vite项目."}]},{"type":"element","tag":"code","props":{"code":"npm init vue\n","language":"powershell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"npm init vue\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"输入命令后跟着"},{"type":"element","tag":"a","props":{"href":"https://vuejs.org/guide/quick-start.html#with-build-tools","rel":["nofollow"]},"children":[{"type":"text","value":"官方文档"}]},{"type":"text","value":"或根据自己的需求创建一个项目即可."}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"ol","props":{"start":2},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"基座项目中安装乾坤"}]}]},{"type":"element","tag":"code","props":{"code":"npm i qiankun \n","language":"powershell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"npm i qiankun \n"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"main.ts"}]},{"type":"text","value":"中配置乾坤"}]}]},{"type":"element","tag":"code","props":{"code":"//  main.js\nimport { registerMicroApps, start } from \"qiankun\";\n\nregisterMicroApps(\n  [\n    // 每个对象表示注册一个子应用\n    {\n      name: \"vue-project\",\n      entry: \"//localhost:20000\", // 应用入口，上线后为应用部署的地址\n      container: \"#container\", // 子应用需要挂载到哪个元素上\n      activeRule: \"/vue\", // 激活子应用的路由，表示跳转到/vue路由下则激活该子应用\n    },\n    {\n      name: \"react-project\",\n      entry: \"//localhost:30000\",\n      container: \"#container\",\n      activeRule: \"/react\",\n    },\n  ],\n  // 乾坤子应用生命周期，这里列出三个，更多参考官方文档\n  {\n    beforeLoad: () => {\n      console.log(\"加载前\");\n    },\n    beforeUnmount: () => {\n      console.log(\"卸载前\");\n    },\n    beforeMount: () => {\n      console.log(\"挂载前\");\n    },\n  }\n);\n\nstart();\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"//  main.js\nimport { registerMicroApps, start } from \"qiankun\";\n\nregisterMicroApps(\n  [\n    // 每个对象表示注册一个子应用\n    {\n      name: \"vue-project\",\n      entry: \"//localhost:20000\", // 应用入口，上线后为应用部署的地址\n      container: \"#container\", // 子应用需要挂载到哪个元素上\n      activeRule: \"/vue\", // 激活子应用的路由，表示跳转到/vue路由下则激活该子应用\n    },\n    {\n      name: \"react-project\",\n      entry: \"//localhost:30000\",\n      container: \"#container\",\n      activeRule: \"/react\",\n    },\n  ],\n  // 乾坤子应用生命周期，这里列出三个，更多参考官方文档\n  {\n    beforeLoad: () => {\n      console.log(\"加载前\");\n    },\n    beforeUnmount: () => {\n      console.log(\"卸载前\");\n    },\n    beforeMount: () => {\n      console.log(\"挂载前\");\n    },\n  }\n);\n\nstart();\n"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"配置路由"}]}]},{"type":"element","tag":"code","props":{"code":"// App.vue\n<template>\n    <div class=\"wrapper\">\n      <HelloWorld msg=\"You did it!\" />\n\n      <nav>\n        <RouterLink to=\"/react\">React Application</RouterLink>\n        <RouterLink to=\"/vue\">Vue Application</RouterLink>\n      </nav>\n      <div id=\"container\"></div>\n    </div>\n</template>\n","language":"vue"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// App.vue\n<template>\n    <div class=\"wrapper\">\n      <HelloWorld msg=\"You did it!\" />\n\n      <nav>\n        <RouterLink to=\"/react\">React Application</RouterLink>\n        <RouterLink to=\"/vue\">Vue Application</RouterLink>\n      </nav>\n      <div id=\"container\"></div>\n    </div>\n</template>\n"}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h3","props":{"id":"创建子应用"},"children":[{"type":"text","value":"创建子应用"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"注意: 官方目前不支持接入Vite创建的项目，所以子应用需要使用vue-cli创建Webpack项目"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"跟着"},{"type":"element","tag":"a","props":{"href":"https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create","rel":["nofollow"]},"children":[{"type":"text","value":"Vue Cli官网"}]},{"type":"text","value":"的教程即可完成子应用的创建"}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"改写Webpack打包配置并配置跨域，因为基座访问子应用会跨域"}]}]},{"type":"element","tag":"code","props":{"code":"module.exports = {\n  // publicPath: \"//localhost:20000\",\n  devServer: {\n    port: 20000,\n    headers: {\n      \"Access-Control-Allow-Origin\": \"*\",\n    },\n  },\n  configureWebpack: {\n    output: {\n      libraryTarget: \"umd\",\n      library: \"vue-project\",\n    },\n  },\n};\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"module.exports = {\n  // publicPath: \"//localhost:20000\",\n  devServer: {\n    port: 20000,\n    headers: {\n      \"Access-Control-Allow-Origin\": \"*\",\n    },\n  },\n  configureWebpack: {\n    output: {\n      libraryTarget: \"umd\",\n      library: \"vue-project\",\n    },\n  },\n};\n"}]}]}]},{"type":"element","tag":"ol","props":{"start":2},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"改写路由"}]}]},{"type":"element","tag":"code","props":{"code":"// router/index.ts\nimport { createRouter, createWebHistory, RouteRecordRaw } from \"vue-router\";\nimport HomeView from \"../views/HomeView.vue\";\n\nconst routes: Array<RouteRecordRaw> = [\n  {\n    path: \"/\",\n    name: \"home\",\n    component: HomeView,\n  },\n  {\n    path: \"/about\",\n    name: \"about\",.\n    component: () =>\n      import(/* webpackChunkName: \"about\" */ \"../views/AboutView.vue\"),\n  },\n];\n\nexport default routes;\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// router/index.ts\nimport { createRouter, createWebHistory, RouteRecordRaw } from \"vue-router\";\nimport HomeView from \"../views/HomeView.vue\";\n\nconst routes: Array<RouteRecordRaw> = [\n  {\n    path: \"/\",\n    name: \"home\",\n    component: HomeView,\n  },\n  {\n    path: \"/about\",\n    name: \"about\",.\n    component: () =>\n      import(/* webpackChunkName: \"about\" */ \"../views/AboutView.vue\"),\n  },\n];\n\nexport default routes;\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了在挂载和卸载子应用时路由也一起销毁和创建，路由的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"index"}]},{"type":"text","value":"中改为仅导出routes"}]},{"type":"element","tag":"ol","props":{"start":3},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"将子应用渲染改写为一个"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"render"}]},{"type":"text","value":"函数"}]}]},{"type":"element","tag":"code","props":{"code":"let history;\nlet router;\nlet app;\nfunction render(props?: any) {\n  history = createWebHistory(\"vue\");\n  router = createRouter({\n    history,\n    routes,\n  });\n  app = createApp(App);\n  const container = props?.container;\n  app.use(router).mount(container ? container.querySelector(\"#app\") : \"#app\");\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"let history;\nlet router;\nlet app;\nfunction render(props?: any) {\n  history = createWebHistory(\"vue\");\n  router = createRouter({\n    history,\n    routes,\n  });\n  app = createApp(App);\n  const container = props?.container;\n  app.use(router).mount(container ? container.querySelector(\"#app\") : \"#app\");\n}\n"}]}]}]},{"type":"element","tag":"ol","props":{"start":4},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"导出子应用相应的生命周期钩子，详细配置参考"},{"type":"element","tag":"a","props":{"href":"https://qiankun.umijs.org/zh/guide/getting-started#1-%E5%AF%BC%E5%87%BA%E7%9B%B8%E5%BA%94%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90","rel":["nofollow"]},"children":[{"type":"text","value":"官方"}]}]}]},{"type":"element","tag":"code","props":{"code":"export async function bootstrap() {\n  console.log(\"vue3 app bootstrap\");\n}\n\nexport async function mount(props: any) {\n  console.log(\"vue3 app mount\", props);\n  render(props);\n}\n\nexport async function unmount() {\n  // 在卸载子应用时候销毁app和router\n  console.log(\"vue3 app unmount\");\n  history = null;\n  router = null;\n  app = null;\n}\n\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"export async function bootstrap() {\n  console.log(\"vue3 app bootstrap\");\n}\n\nexport async function mount(props: any) {\n  console.log(\"vue3 app mount\", props);\n  render(props);\n}\n\nexport async function unmount() {\n  // 在卸载子应用时候销毁app和router\n  console.log(\"vue3 app unmount\");\n  history = null;\n  router = null;\n  app = null;\n}\n\n"}]}]}]},{"type":"element","tag":"ol","props":{"start":5},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"启动子应用后再在基座中切换到对应的路由，效果如下"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"image-20220828161859329","src":"http://182.61.149.102/micro-fronted.png"},"children":[]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"该文中仅接入了一个vue项目，多个项目也是同样的接入流程。"}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"微前端初体验qiankun"},"children":[{"type":"text","value":"微前端初体验——qiankun"}]},{"type":"element","tag":"h2","props":{"id":"-什么是微前端"},"children":[{"type":"text","value":"🧐 什么是微前端"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Techniques, strategies and recipes for building a "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"modern web app"}]},{"type":"text","value":" with "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"multiple teams"}]},{"type":"text","value":" that can "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"ship features independently"}]},{"type":"text","value":". -- "},{"type":"element","tag":"a","props":{"href":"https://micro-frontends.org/","rel":["nofollow"]},"children":[{"type":"text","value":"Micro Frontends"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"微前端是一种多个团队通过独立发布功能的方式来共同构建现代化 web 应用的技术手段及方法策略。"}]}]},{"type":"element","tag":"h3","props":{"id":"核心思想"},"children":[{"type":"text","value":"核心思想"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"技术栈无关"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"​\t\t 主框架不限制接入应用的技术栈，部署完成后主框架自动完成同步更新。即不论你使用的是React、Vue或是其他任何框架都可以部署到主应用上。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"独立开发、独立部署"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"​\t\t 微应用仓库独立，前后端可独立开发，部署完成后主框架自动完成同步更新。主框架只负责将子应用的功能进行组合展示，每个子应用都是一个独立的的应用，而对于主应用来说每个子应用都是一个组件。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"增量升级"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"​\t\t 在面对各种复杂场景时，我们通常很难对一个已经存在的系统做全量的技术栈升级或重构，而微前端是一种非常好的实施渐进式重构的手段和策略。因为每个子应用都是一个独立的应用，代码耦合度更小，在需要更新迭代时更清晰。"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"独立运行时"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"​\t\t 每个微应用之间状态隔离，运行时状态不共享。每个子应用也可以脱离主框架独立运行。"}]},{"type":"element","tag":"h3","props":{"id":"实现方案"},"children":[{"type":"text","value":"实现方案"}]},{"type":"element","tag":"h4","props":{"id":"1-iframe"},"children":[{"type":"text","value":"1. "},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/iframe","rel":["nofollow"]},"children":[{"type":"text","value":"iframe"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"​\t嵌套网页，通过window.postMessage通信。"}]},{"type":"element","tag":"h4","props":{"id":"2-single-spa"},"children":[{"type":"text","value":"2. "},{"type":"element","tag":"a","props":{"href":"https://single-spa.js.org/","rel":["nofollow"]},"children":[{"type":"text","value":"single-spa"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"官网介绍：一个"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"前端微服务"}]},{"type":"text","value":"的javascript框架"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"阿里团队的微前端框架"},{"type":"element","tag":"a","props":{"href":"https://qiankun.umijs.org/zh","rel":["nofollow"]},"children":[{"type":"text","value":"qiankun"}]},{"type":"text","value":"也是基于"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"single-spa"}]},{"type":"text","value":"实现的"}]}]},{"type":"element","tag":"h4","props":{"id":"3-qiankun"},"children":[{"type":"text","value":"3. "},{"type":"element","tag":"a","props":{"href":"https://qiankun.umijs.org/zh","rel":["nofollow"]},"children":[{"type":"text","value":"qiankun"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"官方文档："},{"type":"element","tag":"a","props":{"href":"https://qiankun.umijs.org/zh/guide","rel":["nofollow"]},"children":[{"type":"text","value":"https://qiankun.umijs.org/zh/guide"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"官方文档为中文，这里不做过多介绍，下面将使用"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"qiankun"}]},{"type":"text","value":"完成一个简单的demo"}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"-快速上手"},"children":[{"type":"text","value":"🚀 快速上手"}]},{"type":"element","tag":"h3","props":{"id":"环境"},"children":[{"type":"text","value":"环境"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Node: v16.15.1"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Npm: 8.17.0"}]}]},{"type":"element","tag":"h3","props":{"id":"选定基座项目"},"children":[{"type":"text","value":"选定基座项目"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"qiankun对基座项目没有限制，官方也有三大流行框架搭建微前端项目的教程，该文章以"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Vue"}]},{"type":"text","value":"为基座搭建项目。"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://qiankun.umijs.org/zh/guide/tutorial#react-%E5%BE%AE%E5%BA%94%E7%94%A8","rel":["nofollow"]},"children":[{"type":"text","value":"React微应用"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://qiankun.umijs.org/zh/guide/tutorial#vue-%E5%BE%AE%E5%BA%94%E7%94%A8","rel":["nofollow"]},"children":[{"type":"text","value":"Vue微应用"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://qiankun.umijs.org/zh/guide/tutorial#angular-%E5%BE%AE%E5%BA%94%E7%94%A8","rel":["nofollow"]},"children":[{"type":"text","value":"Angular微应用"}]}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"通过Npm初始化一个Vue项目"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"注意:"}]},{"type":"text","value":"  目前qiankun暂不支持接入基于Vite的子应用, 但是对于主应用没有限制,所以此处创建一个Vite项目."}]},{"type":"element","tag":"code","props":{"code":"npm init vue\n","language":"powershell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"npm init vue"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"输入命令后跟着"},{"type":"element","tag":"a","props":{"href":"https://vuejs.org/guide/quick-start.html#with-build-tools","rel":["nofollow"]},"children":[{"type":"text","value":"官方文档"}]},{"type":"text","value":"或根据自己的需求创建一个项目即可."}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"ol","props":{"start":2},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"基座项目中安装乾坤"}]}]},{"type":"element","tag":"code","props":{"code":"npm i qiankun \n","language":"powershell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"npm i qiankun "}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"main.ts"}]},{"type":"text","value":"中配置乾坤"}]}]},{"type":"element","tag":"code","props":{"code":"//  main.js\nimport { registerMicroApps, start } from \"qiankun\";\n\nregisterMicroApps(\n  [\n    // 每个对象表示注册一个子应用\n    {\n      name: \"vue-project\",\n      entry: \"//localhost:20000\", // 应用入口，上线后为应用部署的地址\n      container: \"#container\", // 子应用需要挂载到哪个元素上\n      activeRule: \"/vue\", // 激活子应用的路由，表示跳转到/vue路由下则激活该子应用\n    },\n    {\n      name: \"react-project\",\n      entry: \"//localhost:30000\",\n      container: \"#container\",\n      activeRule: \"/react\",\n    },\n  ],\n  // 乾坤子应用生命周期，这里列出三个，更多参考官方文档\n  {\n    beforeLoad: () => {\n      console.log(\"加载前\");\n    },\n    beforeUnmount: () => {\n      console.log(\"卸载前\");\n    },\n    beforeMount: () => {\n      console.log(\"挂载前\");\n    },\n  }\n);\n\nstart();\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-071206"},"children":[{"type":"text","value":"//  main.js"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d18f4b"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"registerMicroApps"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"start"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-d18f4b"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"qiankun\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"registerMicroApps"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  ["}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-071206"},"children":[{"type":"text","value":"// 每个对象表示注册一个子应用"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"vue-project\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"entry:"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"//localhost:20000\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-071206"},"children":[{"type":"text","value":"// 应用入口，上线后为应用部署的地址"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"container:"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"#container\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-071206"},"children":[{"type":"text","value":"// 子应用需要挂载到哪个元素上"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"activeRule:"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"/vue\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-071206"},"children":[{"type":"text","value":"// 激活子应用的路由，表示跳转到/vue路由下则激活该子应用"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"react-project\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"entry:"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"//localhost:30000\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"container:"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"#container\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"activeRule:"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"/react\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  ],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-071206"},"children":[{"type":"text","value":"// 乾坤子应用生命周期，这里列出三个，更多参考官方文档"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"beforeLoad"}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-a21548"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"加载前\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"beforeUnmount"}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-a21548"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"卸载前\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"beforeMount"}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-a21548"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"挂载前\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"start"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"();"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"配置路由"}]}]},{"type":"element","tag":"code","props":{"code":"// App.vue\n<template>\n    <div class=\"wrapper\">\n      <HelloWorld msg=\"You did it!\" />\n\n      <nav>\n        <RouterLink to=\"/react\">React Application</RouterLink>\n        <RouterLink to=\"/vue\">Vue Application</RouterLink>\n      </nav>\n      <div id=\"container\"></div>\n    </div>\n</template>\n","language":"vue"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"// App.vue\n<template>\n    <div class=\"wrapper\">\n      <HelloWorld msg=\"You did it!\" />\n\n      <nav>\n        <RouterLink to=\"/react\">React Application</RouterLink>\n        <RouterLink to=\"/vue\">Vue Application</RouterLink>\n      </nav>\n      <div id=\"container\"></div>\n    </div>\n</template>"}]}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h3","props":{"id":"创建子应用"},"children":[{"type":"text","value":"创建子应用"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"注意: 官方目前不支持接入Vite创建的项目，所以子应用需要使用vue-cli创建Webpack项目"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"跟着"},{"type":"element","tag":"a","props":{"href":"https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create","rel":["nofollow"]},"children":[{"type":"text","value":"Vue Cli官网"}]},{"type":"text","value":"的教程即可完成子应用的创建"}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"改写Webpack打包配置并配置跨域，因为基座访问子应用会跨域"}]}]},{"type":"element","tag":"code","props":{"code":"module.exports = {\n  // publicPath: \"//localhost:20000\",\n  devServer: {\n    port: 20000,\n    headers: {\n      \"Access-Control-Allow-Origin\": \"*\",\n    },\n  },\n  configureWebpack: {\n    output: {\n      libraryTarget: \"umd\",\n      library: \"vue-project\",\n    },\n  },\n};\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a75d41"},"children":[{"type":"text","value":"module"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a75d41"},"children":[{"type":"text","value":"exports"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-92602b"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-071206"},"children":[{"type":"text","value":"// publicPath: \"//localhost:20000\","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"devServer:"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"port:"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a0f112"},"children":[{"type":"text","value":"20000"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"headers:"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"Access-Control-Allow-Origin\""}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"*\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"configureWebpack:"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"output:"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"libraryTarget:"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"umd\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"library:"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"vue-project\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"ol","props":{"start":2},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"改写路由"}]}]},{"type":"element","tag":"code","props":{"code":"// router/index.ts\nimport { createRouter, createWebHistory, RouteRecordRaw } from \"vue-router\";\nimport HomeView from \"../views/HomeView.vue\";\n\nconst routes: Array<RouteRecordRaw> = [\n  {\n    path: \"/\",\n    name: \"home\",\n    component: HomeView,\n  },\n  {\n    path: \"/about\",\n    name: \"about\",.\n    component: () =>\n      import(/* webpackChunkName: \"about\" */ \"../views/AboutView.vue\"),\n  },\n];\n\nexport default routes;\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-071206"},"children":[{"type":"text","value":"// router/index.ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d18f4b"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"createRouter"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"createWebHistory"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"RouteRecordRaw"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-d18f4b"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"vue-router\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d18f4b"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"HomeView"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18f4b"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"../views/HomeView.vue\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a21548"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"routes"}]},{"type":"element","tag":"span","props":{"class":"ct-92602b"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a75d41"},"children":[{"type":"text","value":"Array"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-a75d41"},"children":[{"type":"text","value":"RouteRecordRaw"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-92602b"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" ["}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"path:"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"/\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"home\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"component:"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"HomeView"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"path:"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"/about\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"name:"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"about\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":",."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"component"}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-a21548"},"children":[{"type":"text","value":"=>"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-071206"},"children":[{"type":"text","value":"/* webpackChunkName: \"about\" */"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"../views/AboutView.vue\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"];"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d18f4b"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d18f4b"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"routes"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了在挂载和卸载子应用时路由也一起销毁和创建，路由的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"index"}]},{"type":"text","value":"中改为仅导出routes"}]},{"type":"element","tag":"ol","props":{"start":3},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"将子应用渲染改写为一个"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"render"}]},{"type":"text","value":"函数"}]}]},{"type":"element","tag":"code","props":{"code":"let history;\nlet router;\nlet app;\nfunction render(props?: any) {\n  history = createWebHistory(\"vue\");\n  router = createRouter({\n    history,\n    routes,\n  });\n  app = createApp(App);\n  const container = props?.container;\n  app.use(router).mount(container ? container.querySelector(\"#app\") : \"#app\");\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a21548"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"history"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a21548"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"router"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a21548"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a21548"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"render"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"props"}]},{"type":"element","tag":"span","props":{"class":"ct-92602b"},"children":[{"type":"text","value":"?:"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a75d41"},"children":[{"type":"text","value":"any"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"history"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-92602b"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"createWebHistory"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"vue\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"router"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-92602b"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"createRouter"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"history"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"routes"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-92602b"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"createApp"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"App"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-a21548"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"container"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-92602b"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"props"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"?."}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"container"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"use"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"router"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"container"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-92602b"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"container"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"querySelector"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"#app\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-92602b"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"#app\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"ol","props":{"start":4},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"导出子应用相应的生命周期钩子，详细配置参考"},{"type":"element","tag":"a","props":{"href":"https://qiankun.umijs.org/zh/guide/getting-started#1-%E5%AF%BC%E5%87%BA%E7%9B%B8%E5%BA%94%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90","rel":["nofollow"]},"children":[{"type":"text","value":"官方"}]}]}]},{"type":"element","tag":"code","props":{"code":"export async function bootstrap() {\n  console.log(\"vue3 app bootstrap\");\n}\n\nexport async function mount(props: any) {\n  console.log(\"vue3 app mount\", props);\n  render(props);\n}\n\nexport async function unmount() {\n  // 在卸载子应用时候销毁app和router\n  console.log(\"vue3 app unmount\");\n  history = null;\n  router = null;\n  app = null;\n}\n\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d18f4b"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a21548"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a21548"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"bootstrap"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"vue3 app bootstrap\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d18f4b"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a21548"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a21548"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"props"}]},{"type":"element","tag":"span","props":{"class":"ct-92602b"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a75d41"},"children":[{"type":"text","value":"any"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"vue3 app mount\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"props"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"render"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"props"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d18f4b"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a21548"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a21548"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"unmount"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-071206"},"children":[{"type":"text","value":"// 在卸载子应用时候销毁app和router"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-895298"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-27ec8d"},"children":[{"type":"text","value":"\"vue3 app unmount\""}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"history"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-92602b"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a21548"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"router"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-92602b"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a21548"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d37ed2"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-92602b"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a21548"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fd249"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"ol","props":{"start":5},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"启动子应用后再在基座中切换到对应的路由，效果如下"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"image-20220828161859329","src":"http://182.61.149.102/micro-fronted.png"},"children":[]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"该文中仅接入了一个vue项目，多个项目也是同样的接入流程。"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-a0f112{color:#B5CEA8}.ct-92602b{color:#D4D4D4}.ct-a75d41{color:#4EC9B0}.ct-a21548{color:#569CD6}.ct-895298{color:#DCDCAA}.ct-27ec8d{color:#CE9178}.ct-d37ed2{color:#9CDCFE}.ct-1fd249{color:#E6E6E6}.ct-d18f4b{color:#C586C0}.ct-071206{color:#6A9955}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"-什么是微前端","depth":2,"text":"🧐 什么是微前端","children":[{"id":"核心思想","depth":3,"text":"核心思想"},{"id":"实现方案","depth":3,"text":"实现方案"}]},{"id":"-快速上手","depth":2,"text":"🚀 快速上手","children":[{"id":"环境","depth":3,"text":"环境"},{"id":"选定基座项目","depth":3,"text":"选定基座项目"},{"id":"创建子应用","depth":3,"text":"创建子应用"}]}]}},"_type":"markdown","_id":"content:_:fast-api.md","_source":"content","_file":"_/fast-api.md","_extension":"md"}